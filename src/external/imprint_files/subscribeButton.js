var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,e){if(c){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in b||(b[f]={});b=b[f]}a=a[a.length-1];e=b[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var f=c.length;b=b||0;for(0>b&&(b=Math.max(b+f,0));b<f;b++){var g=c[b];if(g===a||Object.is(g,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
function trackSubClickToPiwik(){$.ajax({url:"/track-subclick",type:"GET",success:function(a){console.log(a)}})}function shouldShowSubscribeConfirm(){return!window.location.href.includes("/lp?")&&!window.location.href.includes("/confirm")&&!window.location.href.includes("/render_hidden")}
function addFormCustomParameters(a,c){var b=document.createElement("input");b.type="hidden";b.name=a[0];switch(a[0]){case "autorenewalsDisabled":b.value=checkNeedsAutorenewal(a[1]);a=c.querySelector("input[name='location']");a.value=a.value.replace("subscribe?","subscribe?autorenewalsDisabled="+b.value+"&");break;default:b.value=a[1]}c.appendChild(b);return c}
function generateSubmitFormAndSubmit(a,c,b,e,f,g,d){g=void 0===g?0:g;d=void 0===d?null:d;botfilterChecker(event,d)&&(trackSubClickToPiwik(),"evina"===d&&evinaNotify(event),void 0!==event&&(event.preventDefault(),event.stopPropagation()),showModalWait(),c=_APP.additionalPageShower.addParamsToLocation(c),setTimeout(function(){getFormAndSubmit(a,c,b,e,f,d)},g))}
function getFormAndSubmit(a,c,b,e,f,g){g=void 0===g?null:g;var d=document.createElement("form"),h=document.createElement("input");h.type="hidden";h.name="csrf_token";h.value=e;e=document.createElement("input");e.type="hidden";e.name="location";e.value=c;c=document.createElement("input");c.type="hidden";c.name="redirect";c.value=b;d.action=a;d.appendChild(h);d.appendChild(e);d.appendChild(c);_APP.additionalPageShower.addInputs(d);if(f)for(i=0;i<f.length;i++)d=addFormCustomParameters(f[i],d);document.body.appendChild(d);
if("empello"===g){var k=d.querySelector("input[name='location']");this.getEmpelloToken(function(a){k.value=k.value.replace("subscribe?","subscribe?"+a+"&");d.submit()})}else setTimeout(function(){d.submit()},4E3)}function evinaNotify(a){"function"===typeof evina_notify&&evina_notify(a)}function botfilterChecker(a,c){return void 0===a?!0:"opticks"===c&&$(a.target).hasClass("disabled")?(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),!1):!0};
